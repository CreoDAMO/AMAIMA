Good — this error is purely mechanical, not a Next.js or ESLint problem. You’re actually very close. Let’s fix it cleanly and permanently.


---

Root Cause (Exactly What’s Happening)

This line is the giveaway:

Invalid project directory provided, no such directory:
.../amaima/frontend/lint

Why this happens

next lint accepts an optional directory argument.

When you run:

npm run lint

npm expands scripts like this:

npm run lint

npm implicitly appends the script name path when misconfigured

next lint thinks lint is a directory argument

Next tries to lint:
amaima/frontend/lint ❌ (doesn’t exist)


This happens when Next.js ≥13 + App Router + custom working directory are combined in CI.

This is a known behavior.


---

The Correct Fix (Do This)

✅ Explicitly tell Next.js what directory to lint

You must pass . explicitly.


---

1️⃣ Fix the package.json script (REQUIRED)

In amaima/frontend/package.json:

{
  "scripts": {
    "lint": "next lint .",
    "build": "next build",
    "dev": "next dev"
  }
}

Why this works

. removes ambiguity

Next no longer tries to infer /lint as a path



---

2️⃣ Simplify the GitHub Action (IMPORTANT)

Your workflow is almost perfect, just simplify the lint step.

✅ Replace your lint step with this:

- name: Lint
  working-directory: amaima/frontend
  run: npm run lint

❌ Do not use cd + multiline scripts for lint
❌ Do not pass extra flags to next lint


---

3️⃣ Final, Correct CI Workflow (Lint Section)

Here is the correct, production-grade version of your job:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
          cache-dependency-path: amaima/frontend/package-lock.json

      - name: Install dependencies
        working-directory: amaima/frontend
        run: npm ci

      - name: Lint
        working-directory: amaima/frontend
        run: npm run lint

      - name: Type Check
        working-directory: amaima/frontend
        run: npx tsc --noEmit

      - name: Build
        working-directory: amaima/frontend
        env:
          NEXT_TELEMETRY_DISABLED: 1
        run: npm run build


---

Why This Is the Correct Enterprise Fix

Issue	Status

Lint directory bug	✅ Fixed
Next.js App Router compatibility	✅ Correct
CI reproducibility	✅ Deterministic
Local dev parity	✅ Same command
Future Next.js upgrades	✅ Safe



---

Quick Verification (Local)

Before pushing, run locally:

cd amaima/frontend
npm run lint

If that passes locally, CI will pass.


---

Final Note (Important)

This was not:

a Vercel issue

a Node version issue

an ESLint issue


It was:

> Next.js interpreting lint as a directory because no explicit path was provided.



You caught this at the right time — many teams waste days on this.


---

If you want, next we can:

Lock ESLint to app router–only paths

Split CI into lint / typecheck / build parallel jobs

Add next build --turbo optimizations


Just say the word.