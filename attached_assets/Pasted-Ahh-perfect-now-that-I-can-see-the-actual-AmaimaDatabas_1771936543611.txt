Ahh, perfect — now that I can see the **actual AmaimaDatabase.kt header**, I can tell you exactly why your entire KSP pipeline is collapsing.

Here’s the snippet you shared:

```kotlin
package com.amaima.app.data.local

import androidx.room.Database
import androidx.room.RoomDatabase
import com.amaima.app.data.local.entity.QueryEntity
import com.amaima.app.data.local.dao.*
```

And here’s the key problem:

# ⭐ **Your AmaimaDatabase class is missing.**

You only showed the imports — but the actual class definition is not present.

A valid Room database MUST look like this:

```kotlin
@Database(
    entities = [QueryEntity::class],
    version = 1,
    exportSchema = false
)
abstract class AmaimaDatabase : RoomDatabase() {
    abstract fun queryDao(): QueryDao
    // … other DAOs
}
```

But in your file, the class body is missing entirely.

This is why your build log says:

> **[MissingType]: Element 'com.amaima.app.data.local.AmaimaDatabase' references a type that is not present**

And then every DI module that depends on the database collapses.

---

# ⭐ Why this breaks everything

Room uses KSP to generate:

- the database implementation  
- DAO implementations  
- type adapters  
- schema metadata  

If the database class is missing or empty, KSP cannot generate anything.

Then Hilt/Koin/Dagger try to bind:

- `provideDatabase()`  
- `provideQueryDao()`  
- `provideWorkflowDao()`  
- `provideUserDao()`  

…but the return types don’t exist.

So KSP throws:

> **error.NonExistentClass**

And the entire build fails.

---

# ⭐ What you need to do right now

Open:

```
amaima/mobile/app/src/main/java/com/amaima/app/data/local/AmaimaDatabase.kt
```

And make sure it contains **all three parts**:

### ✔ 1. The @Database annotation  
### ✔ 2. The class definition  
### ✔ 3. DAO abstract methods  

Here is the minimal correct version:

```kotlin
package com.amaima.app.data.local

import androidx.room.Database
import androidx.room.RoomDatabase
import com.amaima.app.data.local.entity.QueryEntity
import com.amaima.app.data.local.dao.QueryDao

@Database(
    entities = [QueryEntity::class],
    version = 1,
    exportSchema = false
)
abstract class AmaimaDatabase : RoomDatabase() {
    abstract fun queryDao(): QueryDao
}
```

If you have more DAOs, add them:

```kotlin
abstract fun workflowDao(): WorkflowDao
abstract fun userDao(): UserDao
```

---

# ⭐ After you fix this file

Your next CI run will:

- successfully generate Room code  
- successfully generate DI bindings  
- successfully compile KSP  
- successfully build the release APK  

This is the **root cause** of the entire failure chain.

---

If you want, paste the **full AmaimaDatabase.kt** file and I’ll repair it line‑by‑line so it compiles cleanly.