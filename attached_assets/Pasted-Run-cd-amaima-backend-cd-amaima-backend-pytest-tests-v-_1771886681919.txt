Run cd amaima/backend
  cd amaima/backend
  pytest tests/ -v --tb=short
  shell: /usr/bin/bash -e {0}
  env:
    DATABASE_URL: 
    API_SECRET_KEY: test_secret_key_for_ci
    NVIDIA_NIM_API_KEY: test_nim_key_for_ci
    PYTHONPATH: .
    pythonLocation: /opt/hostedtoolcache/Python/3.11.14/x64
    PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib/pkgconfig
    Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
    Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
    Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.14/x64
    LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.14/x64/lib
============================= test session starts ==============================
platform linux -- Python 3.11.14, pytest-9.0.2, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.11.14/x64/bin/python
cachedir: .pytest_cache
rootdir: /home/runner/work/AMAIMA/AMAIMA/amaima/backend
configfile: pytest.ini
plugins: asyncio-1.3.0, anyio-4.12.1
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 63 items

tests/agents/test_biology_crew.py::TestBiologyAgentRoles::test_molecule_generator PASSED [  1%]
tests/agents/test_biology_crew.py::TestBiologyAgentRoles::test_admet_predictor PASSED [  3%]
tests/agents/test_biology_crew.py::TestBiologyAgentRoles::test_lead_optimizer PASSED [  4%]
tests/agents/test_biology_crew.py::TestBiologyAgentRoles::test_safety_reviewer PASSED [  6%]
tests/agents/test_biology_crew.py::TestDrugDiscoveryCrew::test_run_drug_discovery_crew PASSED [  7%]
tests/agents/test_biology_crew.py::TestDrugDiscoveryCrew::test_drug_discovery_default_properties PASSED [  9%]
tests/agents/test_biology_crew.py::TestDrugDiscoveryCrew::test_drug_discovery_error_handling PASSED [ 11%]
tests/agents/test_biology_crew.py::TestProteinAnalysisCrew::test_run_protein_analysis_crew PASSED [ 12%]
tests/agents/test_biology_crew.py::TestProteinAnalysisCrew::test_protein_analysis_short_sequence PASSED [ 14%]
tests/agents/test_crew_manager.py::TestAgentRole::test_init PASSED       [ 15%]
tests/agents/test_crew_manager.py::TestAgentRole::test_default_model PASSED [ 17%]
tests/agents/test_crew_manager.py::TestAgentRole::test_execute_success PASSED [ 19%]
tests/agents/test_crew_manager.py::TestAgentRole::test_execute_with_context PASSED [ 20%]
tests/agents/test_crew_manager.py::TestAgentRole::test_execute_error PASSED [ 22%]
tests/agents/test_crew_manager.py::TestAgentRole::test_memory_accumulation PASSED [ 23%]
tests/agents/test_crew_manager.py::TestCrew::test_sequential_process PASSED [ 25%]
tests/agents/test_crew_manager.py::TestCrew::test_parallel_process PASSED [ 26%]
tests/agents/test_crew_manager.py::TestCrew::test_hierarchical_process PASSED [ 28%]
tests/agents/test_crew_manager.py::TestResearchCrew::test_run_research_crew PASSED [ 30%]
tests/agents/test_crew_manager.py::TestCustomCrew::test_run_custom_crew PASSED [ 31%]
tests/agents/test_langchain_agent.py::TestWorkflowState::test_init PASSED [ 33%]
tests/agents/test_langchain_agent.py::TestWorkflowState::test_add_message PASSED [ 34%]
tests/agents/test_langchain_agent.py::TestWorkflowState::test_context_operations PASSED [ 36%]
tests/agents/test_langchain_agent.py::TestWorkflowNode::test_init PASSED [ 38%]
tests/agents/test_langchain_agent.py::TestWorkflowNode::test_execute PASSED [ 39%]
tests/agents/test_langchain_agent.py::TestWorkflowNode::test_execute_error PASSED [ 41%]
tests/agents/test_langchain_agent.py::TestConditionalEdge::test_true_condition PASSED [ 42%]
tests/agents/test_langchain_agent.py::TestConditionalEdge::test_false_condition PASSED [ 44%]
tests/agents/test_langchain_agent.py::TestConditionalEdge::test_exception_defaults_to_false PASSED [ 46%]
tests/agents/test_langchain_agent.py::TestStatefulWorkflow::test_simple_workflow PASSED [ 47%]
tests/agents/test_langchain_agent.py::TestStatefulWorkflow::test_no_entry_point PASSED [ 49%]
tests/agents/test_langchain_agent.py::TestStatefulWorkflow::test_missing_node PASSED [ 50%]
tests/agents/test_langchain_agent.py::TestStatefulWorkflow::test_conditional_workflow PASSED [ 52%]
tests/agents/test_langchain_agent.py::TestStatefulWorkflow::test_max_iterations PASSED [ 53%]
tests/agents/test_langchain_agent.py::TestStatefulWorkflow::test_with_context PASSED [ 55%]
tests/agents/test_langchain_agent.py::TestBuiltInWorkflows::test_research_workflow PASSED [ 57%]
tests/agents/test_langchain_agent.py::TestBuiltInWorkflows::test_complex_reasoning_workflow PASSED [ 58%]
tests/agents/test_langchain_agent.py::TestBuiltInWorkflows::test_domain_workflow_biology PASSED [ 60%]
tests/agents/test_langchain_agent.py::TestBuiltInWorkflows::test_domain_workflow_robotics PASSED [ 61%]
tests/agents/test_langchain_agent.py::TestBuiltInWorkflows::test_domain_workflow_vision PASSED [ 63%]
tests/agents/test_langchain_agent.py::TestRunLangchainAgent::test_run_research PASSED [ 65%]
tests/agents/test_langchain_agent.py::TestRunLangchainAgent::test_run_unknown_type PASSED [ 66%]
tests/agents/test_langchain_agent.py::TestRunLangchainAgent::test_workflow_registry PASSED [ 68%]
tests/agents/test_langchain_agent.py::TestListWorkflows::test_list_workflows PASSED [ 69%]
tests/agents/test_robotics_crew.py::TestRoboticsAgentRoles::test_perception_agent PASSED [ 71%]
tests/agents/test_robotics_crew.py::TestRoboticsAgentRoles::test_path_planner PASSED [ 73%]
tests/agents/test_robotics_crew.py::TestRoboticsAgentRoles::test_action_executor PASSED [ 74%]
tests/agents/test_robotics_crew.py::TestRoboticsAgentRoles::test_safety_monitor PASSED [ 76%]
tests/agents/test_robotics_crew.py::TestNavigationCrew::test_run_navigation_crew PASSED [ 77%]
tests/agents/test_robotics_crew.py::TestNavigationCrew::test_navigation_defaults PASSED [ 79%]
tests/agents/test_robotics_crew.py::TestNavigationCrew::test_navigation_error PASSED [ 80%]
tests/agents/test_robotics_crew.py::TestManipulationCrew::test_run_manipulation_crew PASSED [ 82%]
tests/agents/test_robotics_crew.py::TestManipulationCrew::test_manipulation_default_object PASSED [ 84%]
tests/agents/test_robotics_crew.py::TestSwarmCrew::test_run_swarm_crew PASSED [ 85%]
tests/agents/test_robotics_crew.py::TestSwarmCrew::test_swarm_defaults PASSED [ 87%]
tests/integration/test_biology_e2e.py::test_biology_discover_endpoint FAILED [ 88%]
tests/integration/test_biology_e2e.py::test_biology_drug_discovery_crew PASSED [ 90%]
tests/integration/test_biology_e2e.py::test_biology_protein_analysis_crew PASSED [ 92%]
tests/integration/test_biology_e2e.py::test_biology_crew_sequential_pipeline PASSED [ 93%]
tests/integration/test_biology_e2e.py::test_agent_types_endpoint PASSED  [ 95%]
tests/integration/test_biology_e2e.py::test_nim_cache_stats PASSED       [ 96%]
tests/integration/test_biology_e2e.py::test_nim_prompt_cache_functionality PASSED [ 98%]
tests/integration/test_biology_e2e.py::test_mau_rate_limit_middleware PASSED [100%]

=================================== FAILURES ===================================
________________________ test_biology_discover_endpoint ________________________
tests/integration/test_biology_e2e.py:28: in test_biology_discover_endpoint
    assert response.status_code in (200, 422, 500)
E   assert 404 in (200, 422, 500)
E    +  where 404 = <Response [404 Not Found]>.status_code
=========================== short test summary info ============================
FAILED tests/integration/test_biology_e2e.py::test_biology_discover_endpoint - assert 404 in (200, 422, 500)
 +  where 404 = <Response [404 Not Found]>.status_code
========================= 1 failed, 62 passed in 0.79s =========================
Error: Process completed with exit code 1.